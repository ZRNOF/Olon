{"mappings":"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","sources":["src/Olon.js","src/TypeMaps.js","src/loadShader.js","src/loadImage.js","src/Data.js"],"sourcesContent":["import * as TypeMaps from \"./TypeMaps.js\"\r\nimport loadShader from \"./loadShader.js\"\r\nimport loadImage from \"./loadImage.js\"\r\nimport Data from \"./Data.js\"\r\n\r\nexport { loadShader, loadImage, Data }\r\n\r\nclass Olon {\r\n\tconstructor(width = 300, height = 150) {\r\n\t\tthis.frame = 0\r\n\t\tthis.seconds = 0\r\n\t\tthis.startTime = 0\r\n\t\tthis.currentTime = performance.now()\r\n\t\tthis.lastFrameTime = performance.now()\r\n\t\tthis.fps = 60\r\n\t\tthis.oMouseX = 0\r\n\t\tthis.oMouseY = 0\r\n\t\tthis.mouseX = 0\r\n\t\tthis.mouseY = 0\r\n\r\n\t\tthis.bufferList = {}\r\n\r\n\t\tthis.canvas2D = null\r\n\t\tthis.o2D = null\r\n\r\n\t\tthis.canvas = document.createElement(\"canvas\")\r\n\t\t;[this.canvas.width, this.canvas.height] = [width, height]\r\n\t\tthis.canvas.id = \"olon-canvas\"\r\n\t\tdocument.body.appendChild(this.canvas)\r\n\r\n\t\tthis.gl = this.canvas.getContext(\"webgl2\")\r\n\t\tthis.program = null\r\n\r\n\t\t/////////////////////////////////////////////\r\n\t\t// BLEND CONST //////////////////////////////\r\n\t\tthis.BLEND_MODE = this.gl.FUNC_ADD\r\n\t\tthis.BLEND_SFAC = this.gl.ONE\r\n\t\tthis.BLEND_DFAC = this.gl.ZERO\r\n\r\n\t\tthis.canvas.addEventListener(\"mousemove\", (e) =>\r\n\t\t\tthis._mouseMove(e, this.canvas)\r\n\t\t)\r\n\t\tthis.canvas.addEventListener(\"touchmove\", (e) =>\r\n\t\t\tthis._touchMove(e, this.canvas)\r\n\t\t)\r\n\r\n\t\tthis.UnitMap = TypeMaps.Unit\r\n\t\tthis.IFormatMap = TypeMaps.IFormat\r\n\t\tthis.UniformMap = TypeMaps.Uniform(this.gl)\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// FEATURE //////////////////////////////////\r\n\r\n\tsketchData() {\r\n\t\tconst positionData = Data([-1, -1, 1, -1, 1, 1, 1, 1, -1, 1, -1, -1])\r\n\t\tconst texCoordData = Data([0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0])\r\n\t\treturn { positionData, texCoordData }\r\n\t}\r\n\r\n\tquadData() {\r\n\t\treturn Data([\r\n\t\t\t[-1, -1, 0, 0],\r\n\t\t\t[1, -1, 1, 0],\r\n\t\t\t[1, 1, 1, 1],\r\n\t\t\t[1, 1, 1, 1],\r\n\t\t\t[-1, 1, 0, 1],\r\n\t\t\t[-1, -1, 0, 0],\r\n\t\t])\r\n\t}\r\n\r\n\tsketch() {\r\n\t\tconst { positionData, texCoordData } = this.sketchData()\r\n\t\tthis.setAttribute(\"aPosition\", positionData, \"f32\", 2)\r\n\t\tthis.setAttribute(\"aTexCoord\", texCoordData, \"f32\", 2)\r\n\t}\r\n\r\n\tfullscreen() {\r\n\t\tconst { left, top } = this._getBorderSize(this.canvas)\r\n\t\tthis.width = window.innerWidth - left * 2\r\n\t\tthis.height = window.innerHeight - top * 2\r\n\t\twindow.addEventListener(\"resize\", () => {\r\n\t\t\tconst { left, top } = this._getBorderSize(this.canvas)\r\n\t\t\tthis.width = window.innerWidth - left * 2\r\n\t\t\tthis.height = window.innerHeight - top * 2\r\n\t\t})\r\n\t}\r\n\r\n\tenableCanvas2D(color = \"#000000\") {\r\n\t\tthis.canvas2D = document.createElement(\"canvas\")\r\n\t\t;[this.canvas2D.width, this.canvas2D.height] = [\r\n\t\t\tthis.canvas.width,\r\n\t\t\tthis.canvas.height,\r\n\t\t]\r\n\t\tthis.canvas2D.id = \"o2d\"\r\n\t\tdocument.body.appendChild(this.canvas2D)\r\n\t\tthis.o2D = this.canvas2D.getContext(\"2d\")\r\n\r\n\t\tthis.o2D.fillStyle = color\r\n\t\tthis.o2D.fillRect(0, 0, this.canvas2D.width, this.canvas2D.height)\r\n\r\n\t\tthis.canvas.style.display = \"none\"\r\n\r\n\t\tthis.canvas2D.addEventListener(\"mousemove\", (e) =>\r\n\t\t\tthis._mouseMove(e, this.canvas2D)\r\n\t\t)\r\n\t\tthis.canvas2D.addEventListener(\"touchmove\", (e) =>\r\n\t\t\tthis._touchMove(e, this.canvas2D)\r\n\t\t)\r\n\t}\r\n\r\n\trender(renderFunc) {\r\n\t\tconst animate = (timestamp) => {\r\n\t\t\tthis.frame++\r\n\t\t\tthis.timestamp = timestamp\r\n\t\t\tthis.currentTime = performance.now()\r\n\t\t\tthis.seconds = (this.currentTime - this.startTime) / 1000\r\n\t\t\tthis.fps = 1000 / (this.currentTime - this.lastFrameTime)\r\n\r\n\t\t\trenderFunc()\r\n\r\n\t\t\tif (this.canvas2D) this.o2D.drawImage(this.canvas, 0, 0)\r\n\r\n\t\t\tthis.lastFrameTime = this.currentTime\r\n\t\t\trequestAnimationFrame(animate)\r\n\t\t}\r\n\r\n\t\tthis.startTime = performance.now()\r\n\t\trequestAnimationFrame(animate)\r\n\t}\r\n\r\n\tuse(\r\n\t\t{\r\n\t\t\tprogram = null,\r\n\t\t\tVAO = null,\r\n\t\t\tFBO = null,\r\n\t\t\tRBO = null,\r\n\t\t\ttexture2D = null,\r\n\t\t\tbuffer = null,\r\n\t\t\tDepth = false,\r\n\t\t\tBlend = false,\r\n\t\t} = { program, VAO, FBO, RBO, texture2D, Depth, Blend }\r\n\t) {\r\n\t\treturn {\r\n\t\t\trun: (callback) => {\r\n\t\t\t\tif (program) this.useProgram(program)\r\n\t\t\t\tif (VAO) this.bindVAO(VAO)\r\n\t\t\t\tif (FBO) this.bindFBO(FBO)\r\n\t\t\t\tif (RBO) this.bindRBO(RBO)\r\n\t\t\t\tif (texture2D) this.bindTexture2D(texture2D)\r\n\t\t\t\tif (buffer) this.bindBuffer(buffer)\r\n\t\t\t\tif (Depth) this.enableDepth()\r\n\t\t\t\tif (Blend) this.enableBlend()\r\n\t\t\t\tcallback()\r\n\t\t\t\tif (Blend) this.disableBlend()\r\n\t\t\t\tif (Depth) this.disableDepth()\r\n\t\t\t\tif (buffer) this.unbindBuffer()\r\n\t\t\t\tif (texture2D) this.unbindTexture2D()\r\n\t\t\t\tif (RBO) this.unbindRBO()\r\n\t\t\t\tif (FBO) this.unbindFBO()\r\n\t\t\t\tif (VAO) this.unbindVAO()\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// MOUSE ////////////////////////////////////\r\n\r\n\t_getBorderSize(canvas) {\r\n\t\tconst style = window.getComputedStyle(canvas)\r\n\t\tconst top = parseFloat(style.borderTopWidth) || 0\r\n\t\tconst left = parseFloat(style.borderLeftWidth) || 0\r\n\t\treturn { top, left }\r\n\t}\r\n\r\n\t_updateMouse(canvas, cx, cy) {\r\n\t\tthis.oMouseX = cx / canvas.scrollWidth\r\n\t\tthis.oMouseY = cy / canvas.scrollHeight\r\n\t\tthis.oMouseY = canvas.height - this.oMouseY\r\n\r\n\t\tthis.mouseX = (this.oMouseX / this.width) * 2 - 1\r\n\t\tthis.mouseY = (this.oMouseY / this.height) * 2 - 1\r\n\t}\r\n\r\n\t_mouseMove(e, canvas) {\r\n\t\tconst cx = e.offsetX * canvas.width\r\n\t\tconst cy = e.offsetY * canvas.height\r\n\t\tthis._updateMouse(canvas, cx, cy)\r\n\t}\r\n\r\n\t_touchMove(e, canvas) {\r\n\t\te = e.touches ? e.touches[0] : e.changedTouches?.[0]\r\n\t\tconst rect = canvas.getBoundingClientRect()\r\n\t\tconst { left, top } = this._getBorderSize(canvas)\r\n\t\tconst cx = (e.clientX - rect.left - left) * canvas.width\r\n\t\tconst cy = (e.clientY - rect.top - top) * canvas.height\r\n\t\tthis._updateMouse(canvas, cx, cy)\r\n\t}\r\n\r\n\tget oMouse() {\r\n\t\treturn [this.oMouseX, this.oMouseY]\r\n\t}\r\n\r\n\tget mouse() {\r\n\t\treturn [this.mouseX, this.mouseY]\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// SHADER ///////////////////////////////////\r\n\r\n\t_shader(programObj, source, type) {\r\n\t\tconst shader = this.gl.createShader(type)\r\n\t\tif (!/#version 300 es/.test(source)) source = `#version 300 es\\n${source}`\r\n\t\tsource = source.replace(/^\\s+/, \"\")\r\n\t\tthis.gl.shaderSource(shader, source)\r\n\t\tthis.gl.compileShader(shader)\r\n\t\tthis.gl.attachShader(programObj.program, shader)\r\n\t}\r\n\r\n\t_processShader(programObj, sources, type) {\r\n\t\tif (Array.isArray(sources))\r\n\t\t\tsources.forEach((source) => this._shader(programObj, source, type))\r\n\t\telse this._shader(programObj, sources, type)\r\n\t}\r\n\r\n\tsetShader(vert, frag) {\r\n\t\tthis.program = this.createProgram(vert, frag)\r\n\t\tthis.linkProgram(this.program)\r\n\t\tthis.useProgram(this.program)\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// PROGRAM //////////////////////////////////\r\n\r\n\tsetProgram(programObj) {\r\n\t\tthis.program = programObj\r\n\t}\r\n\r\n\tlinkProgram(programObj) {\r\n\t\tthis.setProgram(programObj)\r\n\t\tthis.gl.linkProgram(programObj.program)\r\n\t}\r\n\r\n\tuseProgram(programObj) {\r\n\t\tthis.setProgram(programObj)\r\n\t\tthis.gl.useProgram(programObj.program)\r\n\t}\r\n\r\n\t_updateProgramUniforms(programObj, name, type, size) {\r\n\t\tprogramObj.uniforms[name] = { type, size }\r\n\t}\r\n\r\n\tcreateProgram(vsList, fsList, tfVaryings) {\r\n\t\tconst program = this.gl.createProgram()\r\n\t\tconst programObj = {\r\n\t\t\tprogram,\r\n\t\t\tuniforms: {},\r\n\t\t\ttexUnitList: {},\r\n\t\t\ttexUnitCount: 0,\r\n\t\t\temptyTexUnits: [],\r\n\t\t}\r\n\t\tthis._processShader(programObj, vsList, this.gl.VERTEX_SHADER)\r\n\t\tthis._processShader(programObj, fsList, this.gl.FRAGMENT_SHADER)\r\n\t\tif (tfVaryings)\r\n\t\t\tthis.gl.transformFeedbackVaryings(\r\n\t\t\t\tprogramObj.program,\r\n\t\t\t\ttfVaryings,\r\n\t\t\t\tthis.gl.INTERLEAVED_ATTRIBS\r\n\t\t\t)\r\n\t\tthis.linkProgram(programObj)\r\n\t\tthis.useProgram(programObj)\r\n\r\n\t\tconst numUniforms = this._getActiveUniforms(programObj)\r\n\t\tfor (let i = 0; i < numUniforms; ++i) {\r\n\t\t\tconst { name, type, size } = this._getActiveUniform(programObj, i)\r\n\t\t\tthis._updateProgramUniforms(programObj, name, type, size)\r\n\t\t\tif (TypeMaps.samplerTypes.has(type)) this._setTexUnit(name)\r\n\t\t}\r\n\t\treturn programObj\r\n\t}\r\n\r\n\t_setTexUnit(name) {\r\n\t\tconst unitIndex = !this.program.emptyTexUnits.length\r\n\t\t\t? this.program.texUnitCount++\r\n\t\t\t: this.program.emptyTexUnits.pop()\r\n\r\n\t\tthis.uniform(name, unitIndex)\r\n\t\tthis.program.texUnitList[name] = unitIndex\r\n\t}\r\n\r\n\t_getActiveUniform(programObj, index) {\r\n\t\tconst info = this.gl.getActiveUniform(programObj.program, index)\r\n\t\treturn {\r\n\t\t\tname: info.name.replace(/\\[[^\\]]*\\]/g, \"\"),\r\n\t\t\ttype: info.type,\r\n\t\t\tsize: info.size,\r\n\t\t}\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// BUFFER USAGES ////////////////////////////\r\n\r\n\tSTATIC_DRAW = 35044 // this.gl.STATIC_DRAW\r\n\tDYNAMIC_DRAW = 35048 // this.gl.DYNAMIC_DRAW\r\n\tSTREAM_DRAW = 35040 // this.gl.STREAM_DRAW\r\n\r\n\tSTATIC_READ = 35045 // this.gl.STATIC_READ\r\n\tDYNAMIC_READ = 35049 // this.gl.DYNAMIC_READ\r\n\tSTREAM_READ = 35041 // this.gl.STREAM_READ\r\n\r\n\tSTATIC_COPY = 35046 // this.gl.STATIC_COPY\r\n\tDYNAMIC_COPY = 35050 // this.gl.DYNAMIC_COPY\r\n\tSTREAM_COPY = 35042 // this.gl.STREAM_COPY\r\n\r\n\t/////////////////////////////////////////////\r\n\t// BUFFER ///////////////////////////////////\r\n\r\n\tcreateBuffer(data, usage) {\r\n\t\tconst buffer = this.gl.createBuffer()\r\n\t\tthis.useBuffer(buffer, () => this.gl.bufferData(this.AB, data, usage))\r\n\t\treturn buffer\r\n\t}\r\n\r\n\tbindBuffer(buffer) {\r\n\t\tthis.gl.bindBuffer(this.AB, buffer)\r\n\t}\r\n\r\n\tunbindBuffer() {\r\n\t\tthis.gl.bindBuffer(this.AB, null)\r\n\t}\r\n\r\n\tuseBuffer(buffer, callback) {\r\n\t\tthis.bindBuffer(buffer)\r\n\t\tcallback()\r\n\t\tthis.unbindBuffer()\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// VAO //////////////////////////////////////\r\n\r\n\t_calcStride(attributes) {\r\n\t\treturn attributes.reduce((acc, { unit, size }) => {\r\n\t\t\treturn acc + size * this.UnitMap[unit].size\r\n\t\t}, 0)\r\n\t}\r\n\r\n\t_vaoByBufferInfos(programObj, bufferInfos) {\r\n\t\tif (!Array.isArray(bufferInfos)) bufferInfos = [bufferInfos]\r\n\t\tconst vao = this.gl.createVertexArray()\r\n\t\tthis.use({\r\n\t\t\tprogram: this.useProgram(programObj),\r\n\t\t\tVAO: vao,\r\n\t\t}).run(() => {\r\n\t\t\tbufferInfos.forEach((bufferInfo) => {\r\n\t\t\t\tthis.useBuffer(bufferInfo.buffer, () => {\r\n\t\t\t\t\tconst attributes = bufferInfo.attributes\r\n\t\t\t\t\tconst stride = bufferInfo.stride || this._calcStride(attributes)\r\n\t\t\t\t\tconst divisor = bufferInfo.divisor\r\n\t\t\t\t\tlet offset = 0\r\n\t\t\t\t\tattributes.forEach(({ name, unit, size }) => {\r\n\t\t\t\t\t\tconst loc = this.aLoc(name)\r\n\t\t\t\t\t\tconst type = this.UnitMap[unit].type\r\n\t\t\t\t\t\tthis.gl.vertexAttribPointer(loc, size, type, false, stride, offset)\r\n\t\t\t\t\t\tthis.gl.enableVertexAttribArray(loc)\r\n\t\t\t\t\t\toffset += size * this.UnitMap[unit].size\r\n\r\n\t\t\t\t\t\tif (Number.isInteger(divisor) && divisor >= 0)\r\n\t\t\t\t\t\t\tthis.gl.vertexAttribDivisor(loc, divisor)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t\treturn vao\r\n\t}\r\n\r\n\t_vaoByAttribute(programObj, attributes) {\r\n\t\tthis.useProgram(programObj)\r\n\t\tconst vao = this.gl.createVertexArray()\r\n\t\tthis.useVAO(vao, () => {\r\n\t\t\tattributes.forEach(({ name, data, size }) => {\r\n\t\t\t\tconst unit = TypeMaps.TypeArrayUnit[data.constructor.name]\r\n\t\t\t\tthis.setAttribute(name, data, unit, size)\r\n\t\t\t})\r\n\t\t})\r\n\t\treturn vao\r\n\t}\r\n\r\n\t_checkUseAttribute(params) {\r\n\t\treturn Array.isArray(params) && Object.hasOwn(params[0], \"name\")\r\n\t}\r\n\r\n\tcreateVAO(programObj, params) {\r\n\t\tif (this._checkUseAttribute(params))\r\n\t\t\treturn this._vaoByAttribute(programObj, params)\r\n\t\treturn this._vaoByBufferInfos(programObj, params)\r\n\t}\r\n\r\n\tbindVAO(vao) {\r\n\t\tthis.gl.bindVertexArray(vao)\r\n\t}\r\n\r\n\tunbindVAO() {\r\n\t\tthis.gl.bindVertexArray(null)\r\n\t}\r\n\r\n\tuseVAO(vao, callback) {\r\n\t\tthis.bindVAO(vao)\r\n\t\tcallback()\r\n\t\tthis.unbindVAO()\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// RENDERBUFFER /////////////////////////////\r\n\r\n\tbindRBO(rbo) {\r\n\t\tthis.gl.bindRenderbuffer(this.RB, rbo)\r\n\t}\r\n\r\n\tunbindRBO() {\r\n\t\tthis.gl.bindRenderbuffer(this.RB, null)\r\n\t}\r\n\r\n\tuseRBO(rbo, callback) {\r\n\t\tthis.bindRBO(rbo)\r\n\t\tcallback()\r\n\t\tthis.unbindRBO()\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// DEPTHBUFFER //////////////////////////////\r\n\r\n\tcreateDepthBuffer(width, height, depthComponent = 16) {\r\n\t\tconst depthBuffer = this.gl.createRenderbuffer()\r\n\t\tthis.useRBO(depthBuffer, () =>\r\n\t\t\tthis.gl.renderbufferStorage(\r\n\t\t\t\tthis.RB,\r\n\t\t\t\tdepthComponent === 24\r\n\t\t\t\t\t? this.gl.DEPTH_COMPONENT24\r\n\t\t\t\t\t: depthComponent === 32\r\n\t\t\t\t\t? this.gl.DEPTH_COMPONENT32F\r\n\t\t\t\t\t: this.gl.DEPTH_COMPONENT16,\r\n\t\t\t\twidth,\r\n\t\t\t\theight\r\n\t\t\t)\r\n\t\t)\r\n\t\treturn depthBuffer\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// FRAMEBUFFER //////////////////////////////\r\n\r\n\tbindFBO(fbo) {\r\n\t\tthis.gl.bindFramebuffer(this.FB, fbo)\r\n\t}\r\n\r\n\tunbindFBO() {\r\n\t\tthis.gl.bindFramebuffer(this.FB, null)\r\n\t}\r\n\r\n\tuseFBO(fbo, callback) {\r\n\t\tthis.bindFBO(fbo)\r\n\t\tcallback()\r\n\t\tthis.unbindFBO()\r\n\t}\r\n\r\n\tcheckFramebufferStatus() {\r\n\t\tconst status = this.gl.checkFramebufferStatus(this.FB)\r\n\t\tswitch (status) {\r\n\t\t\tcase this.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:\r\n\t\t\t\tthrow \"FRAMEBUFFER INCOMPLETE: FRAMEBUFFER_INCOMPLETE_ATTACHMENT\"\r\n\t\t\tcase this.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\r\n\t\t\t\tthrow \"FRAMEBUFFER INCOMPLETE: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT\"\r\n\t\t\tcase this.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\r\n\t\t\t\tthrow \"FRAMEBUFFER INCOMPLETE: FRAMEBUFFER_INCOMPLETE_DIMENSIONS\"\r\n\t\t\tcase this.gl.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:\r\n\t\t\t\tthrow \"FRAMEBUFFER INCOMPLETE: FRAMEBUFFER_INCOMPLETE_MULTISAMPLE\"\r\n\t\t\tcase this.gl.FRAMEBUFFER_UNSUPPORTED:\r\n\t\t\t\tthrow \"FRAMEBUFFER INCOMPLETE: FRAMEBUFFER_UNSUPPORTED\"\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\t// check\r\n\tcreateFBO({ program, outs, depthBuffer }) {\r\n\t\tconst fbo = this.gl.createFramebuffer()\r\n\t\tthis.useFBO(fbo, () => {\r\n\t\t\tconst MAX_DRAW_BUFFERS = this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)\r\n\t\t\tconst COLOR_ATTACHMENTS = Array.from(\r\n\t\t\t\t{ length: MAX_DRAW_BUFFERS },\r\n\t\t\t\t() => this.gl.NONE\r\n\t\t\t)\r\n\r\n\t\t\tthis.setProgram(program)\r\n\t\t\touts.forEach(({ name, texture }) => {\r\n\t\t\t\tconst loc = this.oLoc(name)\r\n\t\t\t\tconst attachment = this.gl.COLOR_ATTACHMENT0 + loc\r\n\t\t\t\tCOLOR_ATTACHMENTS[loc] = attachment\r\n\t\t\t\tthis.gl.framebufferTexture2D(this.FB, attachment, this.T2D, texture, 0)\r\n\t\t\t})\r\n\r\n\t\t\tthis.gl.framebufferRenderbuffer(this.FB, this.DA, this.RB, depthBuffer)\r\n\t\t\tthis.gl.drawBuffers(COLOR_ATTACHMENTS)\r\n\t\t\tthis.checkFramebufferStatus()\r\n\t\t})\r\n\t\treturn fbo\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// TRANSFORM FEEDBACK ///////////////////////\r\n\r\n\ttransformFeedback(readVAO, writeBuffer, primMode, callback) {\r\n\t\tthis.useVAO(readVAO, () => {\r\n\t\t\tthis.gl.bindBufferBase(this.gl.TRANSFORM_FEEDBACK_BUFFER, 0, writeBuffer)\r\n\t\t\tthis.gl.enable(this.gl.RASTERIZER_DISCARD)\r\n\t\t\tthis.gl.beginTransformFeedback(primMode)\r\n\t\t\tcallback()\r\n\t\t\tthis.gl.endTransformFeedback()\r\n\t\t\tthis.gl.disable(this.gl.RASTERIZER_DISCARD)\r\n\t\t\tthis.gl.bindBufferBase(this.gl.TRANSFORM_FEEDBACK_BUFFER, 0, null)\r\n\t\t})\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// LOCATION /////////////////////////////////\r\n\r\n\taLoc(name) {\r\n\t\treturn this.gl.getAttribLocation(this.program.program, name)\r\n\t}\r\n\r\n\tuLoc(name) {\r\n\t\treturn this.gl.getUniformLocation(this.program.program, name)\r\n\t}\r\n\r\n\toLoc(name) {\r\n\t\treturn this.gl.getFragDataLocation(this.program.program, name)\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// UNIFORM //////////////////////////////////\r\n\r\n\t_getActiveUniforms(programObj) {\r\n\t\treturn this.gl.getProgramParameter(\r\n\t\t\tprogramObj.program,\r\n\t\t\tthis.gl.ACTIVE_UNIFORMS\r\n\t\t)\r\n\t}\r\n\r\n\tuniform(name, data) {\r\n\t\tconst info = this.program.uniforms[name]\r\n\t\tif (!info) return\r\n\r\n\t\tif (Object.hasOwn(this.program.texUnitList, name)) {\r\n\t\t\tthis.gl.activeTexture(this.gl.TEXTURE0 + this.program.texUnitList[name])\r\n\t\t\tthis.gl.bindTexture(this.T2D, data)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst loc = this.uLoc(name)\r\n\t\tthis.UniformMap[info.type](loc, data)\r\n\t}\r\n\r\n\tinitUniform(uniformInfos) {\r\n\t\tconst uniforms = {}\r\n\t\tconst entries = Object.entries(uniformInfos)\r\n\t\tfor (const [name, type] of entries)\r\n\t\t\tuniforms[name] = (data) => this.uniform(type, name, data)\r\n\t\treturn uniforms\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// ATTRIBUTE ////////////////////////////////\r\n\r\n\tsetAttribute(name, data, unit, size, divisor) {\r\n\t\tconst loc = this.aLoc(name)\r\n\t\tconst buffer = this.gl.createBuffer()\r\n\t\tconst type = this.UnitMap[unit].type\r\n\t\tthis.useBuffer(buffer, () => {\r\n\t\t\tthis.gl.bufferData(this.AB, data, this.gl.STATIC_DRAW)\r\n\t\t\tthis.gl.vertexAttribPointer(loc, size, type, false, 0, 0)\r\n\t\t\tthis.gl.enableVertexAttribArray(loc)\r\n\t\t\tif (Number.isInteger(divisor) && divisor >= 0)\r\n\t\t\t\tthis.gl.vertexAttribDivisor(loc, divisor)\r\n\t\t})\r\n\t\tconst bufferInfo = { buffer, loc, name, data, size }\r\n\t\tthis.bufferList[name] = bufferInfo\r\n\t\treturn bufferInfo\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// CLEAR ////////////////////////////////////\r\n\r\n\tCOLOR_BUFF = 16384 // this.gl.COLOR_BUFFER_BIT\r\n\tDEPTH_BUFF = 256 // this.gl.DEPTH_BUFFER_BIT\r\n\tSTENCIL_BUFF = 1024 // this.gl.STENCIL_BUFFER_BIT\r\n\r\n\tclear(mask) {\r\n\t\tthis.gl.clear(mask)\r\n\t}\r\n\r\n\tclearColor(r, g, b, a) {\r\n\t\tif (arguments.length !== 0) this.gl.clearColor(r, g, b, a)\r\n\t\tthis.gl.clear(this.gl.COLOR_BUFFER_BIT)\r\n\t}\r\n\r\n\tclearDepth(depth) {\r\n\t\tif (arguments.length !== 0) this.gl.clearDepth(depth)\r\n\t\tthis.gl.clear(this.gl.DEPTH_BUFFER_BIT)\r\n\t}\r\n\r\n\tclearStencil(stencil) {\r\n\t\tif (arguments.length !== 0) this.gl.clearStencil(stencil)\r\n\t\tthis.gl.clear(this.gl.STENCIL_BUFFER_BIT)\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// PRIMITIVE ////////////////////////////////\r\n\r\n\tPOINTS = 0 // this.gl.POINTS\r\n\tLINES = 1 // this.gl.LINES\r\n\tLINE_LOOP = 2 // this.gl.LINE_LOOP\r\n\tLINE_STRIP = 3 // this.gl.LINE_STRIP\r\n\tTRIANGLES = 4 // this.gl.TRIANGLES\r\n\tTRIANGLE_STRIP = 5 // this.gl.TRIANGLE_STRIP\r\n\tTRIANGLE_FAN = 6 // this.gl.TRIANGLE_FAN\r\n\r\n\tdrawArrays(primMode, first, count) {\r\n\t\tthis.gl.drawArrays(primMode, first, count)\r\n\t}\r\n\r\n\tpoints(first, count) {\r\n\t\tthis.gl.drawArrays(this.POINTS, first, count)\r\n\t}\r\n\r\n\tlines(first, count) {\r\n\t\tthis.gl.drawArrays(this.LINES, first, count)\r\n\t}\r\n\r\n\tlineLoop(first, count) {\r\n\t\tthis.gl.drawArrays(this.LINE_LOOP, first, count)\r\n\t}\r\n\r\n\tlineStrip(first, count) {\r\n\t\tthis.gl.drawArrays(this.LINE_STRIP, first, count)\r\n\t}\r\n\r\n\ttriangles(first, count) {\r\n\t\tthis.gl.drawArrays(this.TRIANGLES, first, count)\r\n\t}\r\n\r\n\ttriangleStrip(first, count) {\r\n\t\tthis.gl.drawArrays(this.TRIANGLE_STRIP, first, count)\r\n\t}\r\n\r\n\ttriangleFan(first, count) {\r\n\t\tthis.gl.drawArrays(this.TRIANGLE_FAN, first, count)\r\n\t}\r\n\r\n\tdrawArraysInstanced(primMode, first, count, instanceCount) {\r\n\t\tthis.gl.drawArraysInstanced(primMode, first, count, instanceCount)\r\n\t}\r\n\r\n\tpointsInstanced(first, count, instanceCount) {\r\n\t\tthis.drawArraysInstanced(this.POINTS, first, count, instanceCount)\r\n\t}\r\n\r\n\tlinesInstanced(first, count, instanceCount) {\r\n\t\tthis.drawArraysInstanced(this.LINES, first, count, instanceCount)\r\n\t}\r\n\r\n\tlineLoopInstanced(first, count, instanceCount) {\r\n\t\tthis.drawArraysInstanced(this.LINE_LOOP, first, count, instanceCount)\r\n\t}\r\n\r\n\tlineStripInstanced(first, count, instanceCount) {\r\n\t\tthis.drawArraysInstanced(this.LINE_STRIP, first, count, instanceCount)\r\n\t}\r\n\r\n\ttrianglesInstanced(first, count, instanceCount) {\r\n\t\tthis.drawArraysInstanced(this.TRIANGLES, first, count, instanceCount)\r\n\t}\r\n\r\n\ttriangleStripInstanced(first, count, instanceCount) {\r\n\t\tthis.drawArraysInstanced(this.TRIANGLE_STRIP, first, count, instanceCount)\r\n\t}\r\n\r\n\ttriangleFanInstanced(first, count, instanceCount) {\r\n\t\tthis.drawArraysInstanced(this.TRIANGLE_FAN, first, count, instanceCount)\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// TEXTURE //////////////////////////////////\r\n\r\n\t_isDOMElement(texture) {\r\n\t\treturn texture instanceof HTMLElement ? true : false\r\n\t}\r\n\r\n\tsetTexParameter(wrapX, wrapY, minFilter, magFilter) {\r\n\t\tthis.gl.texParameteri(this.T2D, this.gl.TEXTURE_WRAP_S, wrapX)\r\n\t\tthis.gl.texParameteri(this.T2D, this.gl.TEXTURE_WRAP_T, wrapY)\r\n\t\tthis.gl.texParameteri(this.T2D, this.gl.TEXTURE_MIN_FILTER, minFilter)\r\n\t\tthis.gl.texParameteri(this.T2D, this.gl.TEXTURE_MAG_FILTER, magFilter)\r\n\t}\r\n\r\n\tbindTexture2D(texture) {\r\n\t\tthis.gl.bindTexture(this.T2D, texture)\r\n\t}\r\n\r\n\tunbindTexture2D() {\r\n\t\tthis.gl.bindTexture(this.T2D, null)\r\n\t}\r\n\r\n\tuseTexture2D(texture, callback) {\r\n\t\tthis.bindTexture2D(texture)\r\n\t\tcallback()\r\n\t\tthis.unbindTexture2D()\r\n\t}\r\n\r\n\temptyTexture2D(\r\n\t\twidth,\r\n\t\theight,\r\n\t\tiformat,\r\n\t\t{\r\n\t\t\tminFilter = this.NML,\r\n\t\t\tmagFilter = this.LINEAR,\r\n\t\t\tfilter = undefined,\r\n\t\t\twrapX = this.REPEAT,\r\n\t\t\twrapY = this.REPEAT,\r\n\t\t\twrap = undefined,\r\n\t\t\tflipY = false,\r\n\t\t} = {}\r\n\t) {\r\n\t\tif (filter) [minFilter, magFilter] = [filter, filter]\r\n\t\tif (wrap) [wrapX, wrapY] = [wrap, wrap]\r\n\t\tconst texture = this.gl.createTexture()\r\n\t\tthis.useTexture2D(texture, () => {\r\n\t\t\tthis.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, flipY)\r\n\t\t\tthis.setTexParameter(wrapX, wrapY, minFilter, magFilter)\r\n\t\t\tthis.gl.texStorage2D(this.T2D, 1, iformat, width, height)\r\n\t\t})\r\n\t\treturn texture\r\n\t}\r\n\r\n\ttexture2D(\r\n\t\t{\r\n\t\t\tdata = null,\r\n\t\t\tiformat,\r\n\t\t\tlevel = 0,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tminFilter = this.NML,\r\n\t\t\tmagFilter = this.LINEAR,\r\n\t\t\tfilter = undefined,\r\n\t\t\twrapX = this.REPEAT,\r\n\t\t\twrapY = this.REPEAT,\r\n\t\t\twrap = undefined,\r\n\t\t\tflipY = this._isDOMElement(data),\r\n\t\t} = {\r\n\t\t\tdata,\r\n\t\t\tiformat,\r\n\t\t\tlevel,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tminFilter,\r\n\t\t\tmagFilter,\r\n\t\t\tfilter,\r\n\t\t\twrapX,\r\n\t\t\twrapY,\r\n\t\t\twrap,\r\n\t\t\tflipY,\r\n\t\t}\r\n\t) {\r\n\t\tif (!width) width = data?.width\r\n\t\tif (!height) height = data?.height\r\n\t\tif (!width) throw \"Please specify width.\"\r\n\t\tif (!height) throw \"Please specify height.\"\r\n\t\tif (filter) [minFilter, magFilter] = [filter, filter]\r\n\t\tif (wrap) [wrapX, wrapY] = [wrap, wrap]\r\n\r\n\t\t// create empty texture\r\n\t\t// prettier-ignore\r\n\t\tif (!data) return this.emptyTexture2D(width, height, { minFilter, magFilter, wrapX, wrapY })\r\n\r\n\t\tconst { format, type } = this.IFormatMap[iformat]\r\n\t\tconst texture = this.gl.createTexture()\r\n\t\tthis.gl.bindTexture(this.T2D, texture)\r\n\t\tthis.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, flipY)\r\n\t\tthis.gl.texImage2D(\r\n\t\t\tthis.T2D,\r\n\t\t\tlevel,\r\n\t\t\tiformat,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\t0,\r\n\t\t\tformat,\r\n\t\t\ttype,\r\n\t\t\tdata\r\n\t\t)\r\n\t\tthis.gl.generateMipmap(this.T2D)\r\n\t\tthis.setTexParameter(wrapX, wrapY, minFilter, magFilter)\r\n\t\tthis.gl.bindTexture(this.T2D, null)\r\n\t\treturn texture\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// WRAP MODE ////////////////////////////////\r\n\r\n\tREPEAT = 10497 // this.gl.REPEAT\r\n\tCLAMP = 33071 // this.gl.CLAMP_TO_EDGE\r\n\tMIRROR = 33648 // this.gl.MIRRORED_REPEAT\r\n\r\n\t/////////////////////////////////////////////\r\n\t// MIN & MAG FILTER MODE ////////////////////\r\n\r\n\tNEAREST = 9728 // this.gl.NEAREST\r\n\tLINEAR = 9729 // this.gl.LINEAR\r\n\tNMN = 9984 // this.gl.NEAREST_MIPMAP_NEAREST\r\n\tLMN = 9985 // this.gl.LINEAR_MIPMAP_NEAREST\r\n\tNML = 9986 // this.gl.NEAREST_MIPMAP_LINEAR\r\n\tLML = 9987 // this.gl.LINEAR_MIPMAP_LINEAR\r\n\r\n\t/////////////////////////////////////////////\r\n\t// DEPTH ////////////////////////////////////\r\n\r\n\tenableDepth() {\r\n\t\tthis.gl.enable(this.gl.DEPTH_TEST)\r\n\t}\r\n\r\n\tdisableDepth() {\r\n\t\tthis.gl.disable(this.gl.DEPTH_TEST)\r\n\t}\r\n\r\n\tuseDepth(callback) {\r\n\t\tthis.gl.enable(this.gl.DEPTH_TEST)\r\n\t\tcallback()\r\n\t\tthis.gl.disable(this.gl.DEPTH_TEST)\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// BLEND ////////////////////////////////////\r\n\r\n\tenableBlend() {\r\n\t\tthis.gl.enable(this.gl.BLEND)\r\n\t}\r\n\r\n\tdisableBlend() {\r\n\t\tthis.gl.disable(this.gl.BLEND)\r\n\t}\r\n\r\n\tblend(\r\n\t\t{\r\n\t\t\tsfactor = this.BLEND_SFAC,\r\n\t\t\tdfactor = this.BLEND_DFAC,\r\n\t\t\tmode = this.BLEND_MODE,\r\n\t\t} = { sfactor, dfactor, mode }\r\n\t) {\r\n\t\tthis.BLEND_SFAC = sfactor\r\n\t\tthis.BLEND_DFAC = dfactor\r\n\t\tthis.BLEND_MODE = mode\r\n\t\tthis.gl.blendEquation(this.BLEND_MODE)\r\n\t\tthis.gl.blendFunc(this.BLEND_SFAC, this.BLEND_DFAC)\r\n\t}\r\n\r\n\t/////////////////////////////////////////////\r\n\t// UTILS ////////////////////////////////////\r\n\r\n\tFB = 36160 // this.gl.FRAMEBUFFER\r\n\tT2D = 3553 // this.gl.TEXTURE_2D\r\n\tRB = 36161 // this.gl.RENDERBUFFER\r\n\tDA = 36096 // this.gl.DEPTH_ATTACHMENT\r\n\tAB = 34962 // this.gl.ARRAY_BUFFER\r\n\r\n\t/////////////////////////////////////////////\r\n\t// BLEND MODE ///////////////////////////////\r\n\r\n\tADD = 32774 // this.gl.FUNC_ADD\r\n\tSUB = 32778 // this.gl.FUNC_SUBTRACT\r\n\tREV_SUB = 32779 // this.gl.FUNC_REVERSE_SUBTRACT\r\n\tMIN = 32775 // this.gl.MIN\r\n\tMAX = 32776 // this.gl.MAX\r\n\r\n\t/////////////////////////////////////////////\r\n\t// BLEND FACTOR /////////////////////////////\r\n\r\n\tZERO = 0 // this.gl.ZERO\r\n\tONE = 1 // this.gl.ONE\r\n\tSRC_COLOR = 768 // this.gl.SRC_COLOR\r\n\tONE_MINUS_SRC_COLOR = 769 // this.gl.ONE_MINUS_SRC_COLOR\r\n\tDST_COLOR = 774 // this.gl.DST_COLOR\r\n\tONE_MINUS_DST_COLOR = 775 // this.gl.ONE_MINUS_DST_COLOR\r\n\tSRC_ALPHA = 770 // this.gl.SRC_ALPHA\r\n\tONE_MINUS_SRC_ALPHA = 771 // this.gl.ONE_MINUS_SRC_ALPHA\r\n\tDST_ALPHA = 772 // this.gl.DST_ALPHA\r\n\tONE_MINUS_DST_ALPHA = 773 // this.gl.ONE_MINUS_DST_ALPHA\r\n\tCONSTANT_COLOR = 32769 // this.gl.CONSTANT_COLOR\r\n\tONE_MINUS_CONSTANT_COLOR = 32770 // this.gl.ONE_MINUS_CONSTANT_COLOR\r\n\tCONSTANT_ALPHA = 32771 // this.gl.CONSTANT_ALPHA\r\n\tONE_MINUS_CONSTANT_ALPHA = 32772 // this.gl.ONE_MINUS_CONSTANT_ALPHA\r\n\tSRC_ALPHA_SATURATE = 776 // this.gl.SRC_ALPHA_SATURATE\r\n\r\n\t/////////////////////////////////////////////\r\n\t// INTERNAL FORMAT //////////////////////////\r\n\r\n\tRGB = 6407 // this.gl.RGB\r\n\tRGBA = 6408 // this.gl.RGBA\r\n\tLUMINANCE_ALPHA = 6410 // this.gl.LUMINANCE_ALPHA\r\n\tLUMINANCE = 6409 // this.gl.LUMINANCE\r\n\tALPHA = 6406 // this.gl.ALPHA\r\n\tR8 = 33321 // this.gl.R8\r\n\tR16F = 33325 // this.gl.R16F\r\n\tR32F = 33326 // this.gl.R32F\r\n\tR8UI = 33330 // this.gl.R8UI\r\n\tRG8 = 33323 // this.gl.RG8\r\n\tRG16F = 33327 // this.gl.RG16F\r\n\tRG32F = 33328 // this.gl.RG32F\r\n\tRG8UI = 33336 // this.gl.RG8UI\r\n\tRGB8 = 32849 // this.gl.RGB8\r\n\tSRGB8 = 35905 // this.gl.SRGB8\r\n\tRGB565 = 36194 // this.gl.RGB565\r\n\tR11F_G11F_B10F = 35898 // this.gl.R11F_G11F_B10F\r\n\tRGB9_E5 = 35901 // this.gl.RGB9_E5\r\n\tRGB16F = 34843 // this.gl.RGB16F\r\n\tRGB32F = 34837 // this.gl.RGB32F\r\n\tRGB8UI = 36221 // this.gl.RGB8UI\r\n\tRGBA8 = 32856 // this.gl.RGBA8\r\n\tSRGB8_ALPHA8 = 35907 // this.gl.SRGB8_ALPHA8\r\n\tRGB5_A1 = 32855 // this.gl.RGB5_A1\r\n\tRGB10_A2 = 32857 // this.gl.RGB10_A2\r\n\tRGBA4 = 32854 // this.gl.RGBA4\r\n\tRGBA16F = 34842 // this.gl.RGBA16F\r\n\tRGBA32F = 34836 // this.gl.RGBA32F\r\n\tRGBA8UI = 36220 // this.gl.RGBA8UI\r\n\r\n\t/////////////////////////////////////////////\r\n\t// GET INFOMATION ///////////////////////////\r\n\r\n\tget limit() {\r\n\t\treturn {\r\n\t\t\tTOTAL_TEXTURES: this.MAX_TEXTURES,\r\n\t\t\tFRAG_TEXTURE: this.MAX_FRAG_TEXTURES,\r\n\t\t\tVERT_TEXTURE: this.MAX_VERT_TEXTURES,\r\n\t\t\tDRAW_BUFFERS: this.MAX_DRAW_BUFFERS,\r\n\t\t}\r\n\t}\r\n\r\n\tget MAX_TEXTURES() {\r\n\t\treturn this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS)\r\n\t}\r\n\r\n\tget MAX_FRAG_TEXTURES() {\r\n\t\treturn this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)\r\n\t}\r\n\r\n\tget MAX_VERT_TEXTURES() {\r\n\t\treturn this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS)\r\n\t}\r\n\r\n\tget MAX_DRAW_BUFFERS() {\r\n\t\treturn this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)\r\n\t}\r\n\r\n\tget width() {\r\n\t\treturn this.canvas.width\r\n\t}\r\n\r\n\tget height() {\r\n\t\treturn this.canvas.height\r\n\t}\r\n\r\n\tset width(w) {\r\n\t\tif (this.canvas2D) this.canvas2D.width = w\r\n\t\tthis.canvas.width = w\r\n\t\tthis.gl.viewport(0, 0, this.canvas.width, this.canvas.height)\r\n\t}\r\n\r\n\tset height(h) {\r\n\t\tif (this.canvas2D) this.canvas2D.height = h\r\n\t\tthis.canvas.height = h\r\n\t\tthis.gl.viewport(0, 0, this.canvas.width, this.canvas.height)\r\n\t}\r\n\r\n\tget resolution() {\r\n\t\treturn [this.canvas.width, this.canvas.height]\r\n\t}\r\n}\r\n\r\nexport default (width, height) => new Olon(width, height)\r\n","// ref: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants\r\n\r\n// prettier - ignore\r\nexport const Uniform = (gl) => ({\r\n\t5126: (loc, data) => gl.uniform1f(loc, data), // this.gl.FLOAT,\r\n\t35664: (loc, data) => gl.uniform2fv(loc, data), // this.gl.FLOAT_VEC2,\r\n\t35665: (loc, data) => gl.uniform3fv(loc, data), // this.gl.FLOAT_VEC3,\r\n\t35666: (loc, data) => gl.uniform4fv(loc, data), // this.gl.FLOAT_VEC4,\r\n\r\n\t5124: (loc, data) => gl.uniform1i(loc, data), // this.gl.INT,\r\n\t35667: (loc, data) => gl.uniform2iv(loc, data), // this.gl.INT_VEC2,\r\n\t35668: (loc, data) => gl.uniform3iv(loc, data), // this.gl.INT_VEC3,\r\n\t35669: (loc, data) => gl.uniform4iv(loc, data), // this.gl.INT_VEC4,\r\n\r\n\t// check\r\n\t35670: (loc, data) => gl.uniform1i(loc, data), // this.gl.BOOL,\r\n\t35671: (loc, data) => gl.uniform2iv(loc, data), // this.gl.BOOL_VEC2,\r\n\t35672: (loc, data) => gl.uniform3iv(loc, data), // this.gl.BOOL_VEC3,\r\n\t35673: (loc, data) => gl.uniform4iv(loc, data), // this.gl.BOOL_VEC4,\r\n\r\n\t// check\r\n\t35674: (loc, data) => gl.uniformMatrix2fv(loc, false, data), // this.gl.FLOAT_MAT2,\r\n\t35675: (loc, data) => gl.uniformMatrix3fv(loc, false, data), // this.gl.FLOAT_MAT3,\r\n\t35676: (loc, data) => gl.uniformMatrix4fv(loc, false, data), // this.gl.FLOAT_MAT4,\r\n\r\n\t5125: (loc, data) => gl.uniform1u(loc, data), // this.gl.UNSIGNED_INT,\r\n\t36294: (loc, data) => gl.uniform2uv(loc, data), // this.gl.UNSIGNED_INT_VEC2,\r\n\t36295: (loc, data) => gl.uniform3uv(loc, data), // this.gl.UNSIGNED_INT_VEC3,\r\n\t36296: (loc, data) => gl.uniform4uv(loc, data), // this.gl.UNSIGNED_INT_VEC4,\r\n\r\n\t// 35680: (loc, data) => gl.uniform1i(loc, data), // this.gl.SAMPLER_CUBE,\r\n\t35678: (loc, data) => gl.uniform1i(loc, data), // this.gl.SAMPLER_2D,\r\n\t35679: (loc, data) => gl.uniform1i(loc, data), // this.gl.SAMPLER_3D,\r\n\t35682: (loc, data) => gl.uniform1i(loc, data), // this.gl.SAMPLER_2D_SHADOW,\r\n\t36289: (loc, data) => gl.uniform1i(loc, data), // this.gl.SAMPLER_2D_ARRAY,\r\n\t36292: (loc, data) => gl.uniform1i(loc, data), // this.gl.SAMPLER_2D_ARRAY_SHADOW,\r\n\t36293: (loc, data) => gl.uniform1i(loc, data), // this.gl.SAMPLER_CUBE_SHADOW,\r\n\r\n\t// 35685: (loc, data) => gl.uniform1f (loc, data), // this.gl.FLOAT_MAT2x3,\r\n\t// 35686: (loc, data) => gl.uniform1f (loc, data), // this.gl.FLOAT_MAT2x4,\r\n\t// 35687: (loc, data) => gl.uniform1f (loc, data), // this.gl.FLOAT_MAT3x2,\r\n\t// 35688: (loc, data) => gl.uniform1f (loc, data), // this.gl.FLOAT_MAT3x4,\r\n\t// 35689: (loc, data) => gl.uniform1f (loc, data), // this.gl.FLOAT_MAT4x2,\r\n\t// 35690: (loc, data) => gl.uniform1f (loc, data), // this.gl.FLOAT_MAT4x3,\r\n\r\n\t// 36298: (loc, data) => gl.uniform1f (loc, data), // this.gl.INT_SAMPLER_2D,\r\n\t// 36299: (loc, data) => gl.uniform1f (loc, data), // this.gl.INT_SAMPLER_3D,\r\n\t// 36300: (loc, data) => gl.uniform1f (loc, data), // this.gl.INT_SAMPLER_CUBE,\r\n\t// 36303: (loc, data) => gl.uniform1f (loc, data), // this.gl.INT_SAMPLER_2D_ARRAY,\r\n\r\n\t// 36306: (loc, data) => gl.uniform1f (loc, data), // this.gl.UNSIGNED_INT_SAMPLER_2D,\r\n\t// 36307: (loc, data) => gl.uniform1f (loc, data), // this.gl.UNSIGNED_INT_SAMPLER_3D,\r\n\t// 36308: (loc, data) => gl.uniform1f (loc, data), // this.gl.UNSIGNED_INT_SAMPLER_CUBE,\r\n\t// 36311: (loc, data) => gl.uniform1f (loc, data), // this.gl.UNSIGNED_INT_SAMPLER_2D_ARRAY,\r\n})\r\n\r\nexport const samplerTypes = new Set([\r\n\t35680, 35678, 35679, 35682, 36289, 36292, 36293,\r\n])\r\n\r\n// prettier-ignore\r\nexport const Unit = {\r\n\ti8 : { size: 1, type: 0x1400 },\r\n\ti16: { size: 2, type: 0x1402 },\r\n\ti32: { size: 4, type: 0x1404 },\r\n\tu8 : { size: 1, type: 0x1401 },\r\n\tu16: { size: 2, type: 0x1403 },\r\n\tu32: { size: 4, type: 0x1405 },\r\n\tf32: { size: 4, type: 0x1406 },\r\n}\r\n\r\n// prettier-ignore\r\nexport const TypeArrayUnit = {\r\n\tInt8Array: \"i8\",\r\n\tInt16Array: \"i16\",\r\n\tInt32Array: \"i32\",\r\n\tUint8Array: \"u8\",\r\n\tUint16Array: \"u16\",\r\n\tUint32Array: \"u32\",\r\n\tFloat32Array: \"f32\",\r\n}\r\n\r\n// prettier-ignore\r\nexport const Data = {\r\n\ti8 : Int8Array,\r\n\ti16: Int16Array,\r\n\ti32: Int32Array,\r\n\tu8 : Uint8Array,\r\n\tu16: Uint16Array,\r\n\tu32: Uint32Array,\r\n\tf32: Float32Array,\r\n}\r\n\r\n// prettier-ignore\r\nexport const IFormat = {\r\n\t6407 : { format: 0x1907, type: 0x1401 }, /* RGB */\r\n\t6408 : { format: 0x1908, type: 0x1401 }, /* RGBA */\r\n\t6410 : { format: 0x190a, type: 0x1401 }, /* LUMINANCE_ALPHA */\r\n\t6409 : { format: 0x1909, type: 0x1401 }, /* LUMINANCE */\r\n\t6406 : { format: 0x1906, type: 0x1401 }, /* ALPHA */\r\n\t33321: { format: 0x1903, type: 0x1401 }, /* R8 */\r\n\t33325: { format: 0x1903, type: 0x1406 }, /* R16F */\r\n\t33326: { format: 0x1903, type: 0x1406 }, /* R32F */\r\n\t33330: { format: 0x8d94, type: 0x1401 }, /* R8UI */\r\n\t33323: { format: 0x8227, type: 0x1401 }, /* RG8 */\r\n\t33327: { format: 0x8227, type: 0x1406 }, /* RG16F */\r\n\t33328: { format: 0x8227, type: 0x1406 }, /* RG32F */\r\n\t33336: { format: 0x8228, type: 0x1401 }, /* RG8UI */\r\n\t32849: { format: 0x1907, type: 0x1401 }, /* RGB8 */\r\n\t35905: { format: 0x1907, type: 0x1401 }, /* SRGB8 */\r\n\t36194: { format: 0x1907, type: 0x1401 }, /* RGB565 */\r\n\t35898: { format: 0x1907, type: 0x1406 }, /* R11F_G11F_B10F */\r\n\t35901: { format: 0x1907, type: 0x1406 }, /* RGB9_E5 */\r\n\t34843: { format: 0x1907, type: 0x1406 }, /* RGB16F */\r\n\t34837: { format: 0x1907, type: 0x1406 }, /* RGB32F */\r\n\t36221: { format: 0x8d98, type: 0x1401 }, /* RGB8UI */\r\n\t32856: { format: 0x1908, type: 0x1401 }, /* RGBA8 */\r\n\t35907: { format: 0x1908, type: 0x1401 }, /* SRGB8_ALPHA8 */\r\n\t32855: { format: 0x1908, type: 0x1401 }, /* RGB5_A1 */\r\n\t32857: { format: 0x1908, type: 0x8368 }, /* RGB10_A2 */\r\n\t32854: { format: 0x1908, type: 0x1401 }, /* RGBA4 */\r\n\t34842: { format: 0x1908, type: 0x1406 }, /* RGBA16F */\r\n\t34836: { format: 0x1908, type: 0x1406 }, /* RGBA32F */\r\n\t36220: { format: 0x8d99, type: 0x1401 }, /* RGBA8UI */\r\n}\r\n","const loadShader = async (path) => {\r\n\tlet shaderCode\r\n\ttry {\r\n\t\tconst response = await fetch(path)\r\n\t\tif (!response.ok) throw new Error(`Failed to fetch ${path}`)\r\n\t\tshaderCode = await response.text()\r\n\t\tshaderCode = await processIncludes(shaderCode)\r\n\t\treturn shaderCode\r\n\t} catch (error) {\r\n\t\tconsole.error(error)\r\n\t\tthrow error\r\n\t}\r\n}\r\n\r\nconst processIncludes = async (shaderCode) => {\r\n\tconst includeRegex = /#include \"(.+)\"/g\r\n\tconst includePaths = []\r\n\tlet match\r\n\r\n\twhile ((match = includeRegex.exec(shaderCode)) !== null) {\r\n\t\tincludePaths.push(match[1])\r\n\t}\r\n\r\n\tconst includes = await Promise.all(\r\n\t\tincludePaths.map(async (path) => {\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await fetch(path)\r\n\t\t\t\tif (!response.ok) throw new Error(`Failed to fetch ${path}`)\r\n\t\t\t\treturn await response.text()\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(`Failed to load included file: ${path}`)\r\n\t\t\t\tthrow error\r\n\t\t\t}\r\n\t\t})\r\n\t)\r\n\r\n\tincludePaths.forEach((path, index) => {\r\n\t\tshaderCode = shaderCode.replace(`#include \"${path}\"`, includes[index])\r\n\t})\r\n\r\n\treturn shaderCode\r\n}\r\n\r\nexport default loadShader\r\n","const loadImage = (src) =>\r\n\tnew Promise((resolve, reject) => {\r\n\t\tconst image = new Image()\r\n\t\timage.addEventListener(\"load\", () => resolve(image))\r\n\t\timage.addEventListener(\"error\", (error) => {\r\n\t\t\treject(new Error(`Error loading image from ${src}: ${error.message}`))\r\n\t\t})\r\n\t\timage.crossOrigin = \"anonymous\"\r\n\t\timage.src = src\r\n\t})\r\n\r\nexport default loadImage\r\n","import * as TypeMaps from \"./TypeMaps.js\"\r\n\r\nexport const DataType = (data) => data.constructor.name\r\n\r\nconst flat = (array) => array.flat(Infinity)\r\n\r\nconst Data = (data, type = \"f32\") => {\r\n\tif (Array.isArray(data)) return new TypeMaps.Data[type](flat(data))\r\n\tif (typeof data === \"number\") return new TypeMaps.Data[type](data)\r\n\tthrow new Error(\"Unsupported data type\")\r\n}\r\n\r\nexport default Data\r\n"],"names":[],"version":3,"file":"Olon.js.map"}